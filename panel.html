<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel de Landings</title>
  <style>
    body { font-family: sans-serif; background: #111; color: white; padding: 20px; }
    .landing-item { background: #222; padding: 10px; margin: 10px 0; border-radius: 6px; }
    button { background: #0ff; color: #000; border: none; padding: 10px; margin: 5px; cursor: pointer; border-radius: 4px; }
    input, textarea, select { width: 100%; padding: 8px; margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Panel de Control (protegido)</h1>
  <div id="form">
    <input type="text" id="name" placeholder="Nombre" />
    <input type="tel" id="whatsapp" placeholder="WhatsApp (ej: 549113...)" />
    <textarea id="text" placeholder="Texto destacado"></textarea>
    <select id="design">
      <option value="design-1">Diseño 1</option>
      <option value="design-2">Diseño 2</option>
      <option value="design-3">Diseño 3</option>
    </select>
    <button onclick="guardarLanding()">Guardar Landing</button>
  </div>

  <h2>Landings creadas</h2>
  <div id="listado"></div>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbz3q51hNlO5We3-RhD0OjVy_ybRFzrgv3SvJ6bK7Nzlu1L-35uhhZg2hQXumFpDlFTi/exec';

function cargarLandings() {
  fetch(API_URL)
    .then(r => r.json())
    .then(data => {
      document.getElementById('listado').innerHTML = data.map(l => `
        <div class='landing-item'>
          <strong>${l.name}</strong><br/>
          ${l.text}<br/>
          <small>ID: ${l.id}</small><br/>
          <a href="landing.html?id=${l.id}" target="_blank">Ver Landing</a>
        </div>
      `).join('');
    });
}

function guardarLanding() {
  const data = {
    name: document.getElementById('name').value,
    whatsappNumber: document.getElementById('whatsapp').value,
    text: document.getElementById('text').value,
    design: document.getElementById('design').value
  };

  fetch(API_URL, {
    method: 'POST',
    body: JSON.stringify(data),
    headers: { 'Content-Type': 'application/json' }
  })
  .then(r => r.json())
  .then(res => {
    alert('Landing guardada');
    cargarLandings();
  });
}

// Proteger con clave simple
const clave = prompt("Ingrese la clave de acceso:");
if (clave !== "clarita") {
  document.body.innerHTML = "<h2 style='color:red;'>Acceso denegado</h2>";
} else {
  cargarLandings();
}
</script>
</body>
</html>
